# TODO: k8s-utilization-agent Improvements

## ðŸ”´ Immediate Fixes (Bugs)

- [x] Missing test files - tests/ directory is empty âœ… Created 67 tests
- [x] Undefined `PrometheusError` - Referenced in orchestrator.py but never defined âœ… Defined hierarchy
- [x] Tracker function mismatch - `append_change()` call signature differs from definition âœ… Fixed

---

## ðŸŸ¡ Short-Term Improvements

- [x] **Logging** - Replace `print()` with Python `logging` module âœ… All modules use logging
- [x] **Reliability** - Add retry logic with exponential backoff for Prometheus âœ… 3 retries
- [x] **Deployment** - Add `/health` and `/ready` endpoints âœ… Plus /metrics
- [x] **Security** - Add API key header for remote LLM calls âœ… LLM_API_KEY support
- [x] **Config** - Validate config values on startup âœ… ConfigValidationError

---

## ðŸŸ¢ Medium-Term Enhancements

- [x] **Testing** - Build pytest suite for all modules âœ… 67 tests passing
- [ ] **Performance** - Batch Prometheus queries (`pod=~"a|b|c"`)
- [x] **Caching** - LRU cache for repeated Prometheus queries âœ… query_instant_cached
- [x] **Observability** - Expose `/metrics` endpoint for self-monitoring âœ… Prometheus format
- [ ] **Deployment** - Add Dockerfile + Helm chart (DEFERRED)
- [ ] **CI/CD** - GitHub Actions for lint, test, build (DEFERRED)

---

## ðŸ”µ Future Features (DEFERRED)

- [ ] **Historical trends** - Compare current vs past utilization
- [ ] **Multi-cluster** - Aggregate analysis across clusters
- [ ] **Alerting integration** - Push warnings to AlertManager/Slack
- [ ] **YAML export** - Generate recommended resource manifests
- [ ] **Real-time updates** - WebSocket for live dashboard refresh