[
  {
    "timestamp": "2025-01-23T15:30:00Z",
    "files_modified": [
      "phase2/validator.py",
      "phase2/runner.py",
      "tests/test_phase2.py"
    ],
    "change_type": "analysis",
    "description": "Comprehensive Phase 2 validator rewrite: implemented 8 validation layers (structural, type, warnings, action_candidates, safety cross-checks with Phase 1). New schema enforces 6 required top-level keys (cluster_summary, patterns, warnings, action_candidates, priorities, limitations) with strict field validation. Safety layer prevents resize actions on unsafe deployments and requires limitations to reference insufficient_data from Phase 1. All 60 tests passing."
  },
  {
    "timestamp": "2026-01-01T22:50:00Z",
    "files_modified": [
      "ui.py",
      "templates/dashboard.html",
      "requirements.txt"
    ],
    "change_type": "presentation",
    "description": "Phase 3 Web UI complete redesign: Changed port from 5000 to 8080. Redesigned dashboard with comprehensive 3-tab interface. TAB 1 (Facts & Evidence): 6 sections - Cluster Overview, Cluster Patterns, Deployments Table, Deployment Details (drill-down), HPA Analysis, Node Pools. TAB 2 (Insights LLM): 6 sections - Cluster Summary, Patterns Detected, Warnings, Action Candidates, Prioritization, Limitations. TAB 3 (Raw JSON): Toggle buttons for analysis_output.json and insights_output.json. Design principle: Phase 1 shows the truth (facts), Phase 2 explains the truth (insights), UI never mixes them. All sections follow strict separation with color-coded badges, tables, drill-downs, and responsive layout."
  },
  {
    "timestamp": "2026-01-01T18:05:27.300095Z",
    "files_modified": [
      "metrics/discovery.py",
      "analysis/deployment_analysis.py",
      "analysis/hpa_analysis.py",
      "analysis/node_analysis.py",
      "orchestrator.py"
    ],
    "change_type": "phase1_enhancement",
    "description": "Complete Phase 1 analysis implementation with rich metrics, flags, and edge case detection"
  },
  {
    "timestamp": "2026-01-01T18:05:27.300231Z",
    "files_modified": [
      "phase2/runner.py",
      "phase2/llm_client.py",
      "phase2/validator.py",
      "phase2/__init__.py"
    ],
    "change_type": "phase2_implementation",
    "description": "Complete Phase 2 LLM runner with Ollama/remote API support, atomic output, and flexible validation"
  },
  {
    "timestamp": "2026-01-03T00:30:00Z",
    "files_modified": [
      "ui.py",
      "templates/dashboard.html",
      "templates/error.html"
    ],
    "change_type": "phase3_completion",
    "description": "Phase 3 presentation layer finalized: Created templates directory with dashboard.html (3-tab interface for Facts, Insights, Raw JSON) and error.html. Fixed ui.py to use correct output/ paths and proper API response handling. Template structure matches actual analysis_output.json schema (deployment_analysis, hpa_analysis with scaling_config/scaling_behavior, node_analysis with fragmentation_analysis/utilization_facts, cross_layer_observations). All endpoints tested and working."
  },
  {
    "timestamp": "2026-01-03T02:00:00Z",
    "files_modified": [
      "config.py",
      "metrics/prometheus_client.py",
      "orchestrator.py",
      "phase2/llm_client.py",
      "phase2/runner.py",
      "tracker.py",
      "ui.py",
      "tests/conftest.py",
      "tests/test_config.py",
      "tests/test_llm_client.py",
      "tests/test_prometheus_client.py",
      "tests/test_ui.py",
      "tests/test_validator.py",
      "TODO.txt"
    ],
    "change_type": "refactor_and_testing",
    "description": "Major improvements from TODO list: Bug fixes - defined PrometheusError class hierarchy, fixed tracker.py function signature. Short-term - replaced print() with structured logging, added retry logic to Prometheus client (3 retries with exponential backoff), added /health and /ready endpoints for K8s probes, added LLM API key support, added config validation on startup. Medium-term - added LRU caching for Prometheus queries, added /metrics endpoint for self-monitoring, created comprehensive test suite with 67 passing tests covering config, prometheus_client, llm_client, validator, and ui modules. Fixed datetime.utcnow() deprecation warnings."
  },
  {
    "timestamp": "2026-01-03T03:00:00Z",
    "files_modified": [
      "config.py",
      "metrics/prometheus_client.py",
      "analysis/fragmentation_attribution.py",
      "analysis/node_analysis.py",
      "tests/test_fragmentation_attribution.py"
    ],
    "change_type": "phase1_extension",
    "description": "Node Fragmentation Attribution feature: Added configurable PROMETHEUS_RETRY_COUNT and PROMETHEUS_RETRY_BACKOFF_BASE to config. Added fragmentation thresholds (DAEMONSET_OVERHEAD_THRESHOLD_PERCENT=15, LARGE_POD_REQUEST_THRESHOLD_PERCENT=25, FRAGMENTATION_THRESHOLD=0.3). Created analysis/fragmentation_attribution.py module with 4 attribution functions: large_request_pods (pods consuming >25% of node resources), constraint_blockers (pods with topology/affinity constraints), daemonset_overhead (DaemonSet resource consumption), scale_down_blockers (pods preventing node drain). Integrated into node_analysis.py with second-pass attribution for nodes exceeding fragmentation threshold. Added 13 comprehensive tests (80 total now passing)."
  },
  {
    "timestamp": "2026-01-04T10:00:00Z",
    "files_modified": [
      "config.py",
      "phase2/validator.py",
      "tests/conftest.py",
      "tests/test_validator.py"
    ],
    "change_type": "phase2_implementation",
    "description": "Phase 2 LLM Summarization Layer: Updated PHASE2_LLM_PROMPT for concise grouped output format (no narrative prose, no action suggestions). New output schema with summary, deployment_review, hpa_review, node_fragmentation_review, cross_layer_risks, and limitations. Rewrote validator.py with strict Phase-1 reference validation - extracts valid names from analysis_output, rejects unknown objects, enforces category structure, blocks action_candidates. Added 27 validator tests covering structure, Phase-1 reference validation, safety flags, and limitations. Total 95 tests passing."
  },
  {
    "timestamp": "2026-01-04T11:00:00Z",
    "files_modified": [
      "templates/dashboard.html",
      "tests/test_ui.py"
    ],
    "change_type": "ui_update",
    "description": "UI Update for Node Fragmentation Attribution and LLM Summaries: Added Node Fragmentation Attribution drill-down in Node Analysis table showing large_request_pods, constraint_blockers, daemonset_overhead, scale_down_blockers with clickable links to related workloads. Updated Insights (LLM) tab to render new concise grouped format with deployment_review, hpa_review, node_fragmentation_review, cross_layer_risks sections. Added CSS for frag-section, review-section, and review-item components. Maintains backward compatibility with legacy patterns/warnings format. Added 7 UI tests for empty, partial, and full attribution cases. Total 102 tests passing."
  },
  {
    "timestamp": "2026-01-04T12:00:00Z",
    "files_modified": [
      "config.py"
    ],
    "change_type": "config_enhancement",
    "description": "Multi-cluster Prometheus support: Replaced single PROMETHEUS_URL with PROMETHEUS_ENDPOINTS list containing cluster objects (cluster_name, project, environment, url, owner). Added ACTIVE_CLUSTER env var to select which cluster to query. Added get_active_prometheus_url() and get_active_cluster_info() helper functions. Maintained backward compatibility with legacy PROMETHEUS_URL variable. Updated validate_config() to check all endpoint URLs. Default clusters: prod-cluster-1 (payments), prod-cluster-2 (orders), local-kind (development). All 102 tests passing."
  },
  {
    "timestamp": "2026-01-04T13:00:00Z",
    "files_modified": [
      "config.py",
      "orchestrator.py",
      "phase2/runner.py"
    ],
    "change_type": "feature",
    "description": "Multi-cluster loop with cluster-specific output files: Output files now named {cluster_name}_analysis_output.json and {cluster_name}_insights_output.json. Added RUN_MODE config ('active' or 'all'), get_analysis_output_path(), get_insights_output_path(), get_clusters_to_run() helpers. Orchestrator and Phase 2 runner loop through clusters one by one. Each output includes cluster_info metadata. All 102 tests passing."
  }
]